<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Exercise</title>
    <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
    <script>
        //Test to see if geolocation is supported
        if('geolocation' in navigator){
            console.log('Geolocation is available')
            
            
            navigator.geolocation.getCurrentPosition(async position => {
            console.log(position);
        
        //Put coordinate data on the page    
            const lat = position.coords.latitude;
            const long = position.coords.longitude;
            const timestamp = position.coords.timestamp;
            document.getElementById('latitude').textContent = lat;
            document.getElementById('longitude').textContent = long;
        
        // Create a container to store the data        
            const data = {lat, long};
            
        //Package up data 
            const options = {
                method : 'POST',
                headers : {
                    'Content-Type': 'application/json'
                },
                body : JSON.stringify(data)
            };

            const response = await fetch('/api', options); 
            const json = await response.json();  
            console.log(json); 
            });
        }else{
            console.log('Geolocation is not available')
        }
    
      
    

    </script>
    <p id="title">Geolocation Page</p>
    <p>Latitude: <span id="latitude"></span>&deg;<br /></p>
    <p>Longitude: <span id="longitude"></span>&deg;</p>
    <div>
       <form>
           
       </form>
    </div>
    <button id="refresh" type="button">Refresh</button>
    <div id="textReturn">
        <form action="public/"
        <input id="inputBox" type="text"></input>
    </div>
    <script>
         let button = document.getElementById("refresh");
         button.addEventListener('click', () =>{
         location.reload();
       });
        
    </script>

</body>
</html>